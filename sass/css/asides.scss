@import "vars";

/* Per-type colors */
$asides: (
  note: (bg: rgb(18, 37, 59),
    stripe: rgb(67, 133, 190),
    accent: rgb(171, 207, 226)),
  tip: (bg: rgb(57, 23, 43),
    stripe: rgb(206, 93, 151),
    accent: rgb(249, 185, 207)),
  caution: (bg: rgb(58, 45, 4),
    stripe: rgb(208, 162, 21),
    accent: rgb(241, 214, 126)),
  danger: (bg: rgb(62, 23, 21),
    stripe: rgb(209, 77, 65),
    accent: rgb(253, 178, 162))
);

/* Base aside styles */
.aside {
  position: relative;
  margin: 1rem 0;
  border-radius: .2rem;
  overflow: visible;
  color: $tx;
  background: var(--aside-bg);

  &__header {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .5rem .5rem .1rem 1rem;
    font-weight: 600;
    color: var(--aside-accent);
  }

  &__icon {
    display: inline-flex;
    align-items: center;
    width: 1rem;
    height: 1rem;
    flex: 0 0 1.25rem;
    font-size: 1.125rem;
    line-height: 0;
    color: var(--aside-accent);
    margin-top: -0.125rem;

    svg {
      stroke: currentColor;
    }
  }

  &__body {
    padding: 0.1rem 1rem 0.1rem 1rem;
  }

  /* left stripe (uses --aside-stripe set per-type) */
  &::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: .2rem;
    border-top-left-radius: .5rem;
    border-bottom-left-radius: .5rem;
    background: var(--aside-stripe);
  }
}

/* Generate per-type classes and interpolate map values so real rgb(...) is emitted */
@each $name, $props in $asides {
  .aside--#{$name} {
    --aside-bg: #{map-get($props, bg)};
    --aside-stripe: #{map-get($props, stripe)};
    --aside-accent: #{map-get($props, accent)};
    background: var(--aside-bg);
  }
}